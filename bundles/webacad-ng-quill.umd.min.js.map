{"version":3,"sources":["ng://@webacad/ng-quill/quill.component.ts","ng://@webacad/ng-quill/quill.module.ts"],"names":["QuillComponent","$el","this","_","prototype","ngOnInit","options","theme","editor","Quill","nativeElement","defaultContents","setContents","on","_this","onChange","getValue","querySelector","addEventListener","onTouched","ngOnDestroy","writeValue","contents","registerOnChange","fn","registerOnTouched","undefined","getContents","isEmpty","ops","length","opsTypes","Object","keys","insert","Component","args","selector","template","providers","provide","NG_VALUE_ACCESSOR","useExisting","multi","ElementRef","Input","QuillModule","NgModule","declarations","exports"],"mappings":"oYAAA,IAAAA,EAAA,WA+BC,SAAAA,EACSC,GAAAC,KAAAD,IAAAA,aAXc,oBAGD,oBAuGA,2BAGH,SAACE,YA9FbH,EAAAI,UAAAC,+BAEAC,EAAUJ,KAAKI,SAAW,GAEH,oBAAlBA,EAAQC,QAClBD,EAAQC,MAAQL,KAAKK,OAGtBL,KAAKM,OAAS,IAAIC,EAAMP,KAAKD,IAAIS,cAAeJ,GAEZ,oBAAzBJ,KAAKS,iBACfT,KAAKM,OAAOI,YAAYV,KAAKS,iBAG9BT,KAAKM,OAAOK,GAAG,cAAe,WAC7BC,EAAKC,SAASD,EAAKE,cAGpBd,KAAKD,IAAIS,cAAcO,cAAc,cAAcC,iBAAiB,OAAQ,WAC3EJ,EAAKK,eAKAnB,EAAAI,UAAAgB,yBAKApB,EAAAI,UAAAiB,oBAAWC,GAEbpB,KAAKM,OACRN,KAAKM,OAAOI,YAAYU,GAExBpB,KAAKS,gBAAkBW,GAKlBtB,EAAAI,UAAAmB,0BAAiBC,GAEvBtB,KAAKa,SAAWS,GAIVxB,EAAAI,UAAAqB,2BAAkBD,GAExBtB,KAAKiB,UAAYK,GAIRxB,EAAAI,UAAAY,SAAV,WAEC,IAAKd,KAAKM,OACT,OAAOkB,UAGR,IAAMJ,EAAgBpB,KAAKM,OAAOmB,cAElC,OAAIzB,KAAK0B,QAAQN,GACTI,UAGDJ,GAIEtB,EAAAI,UAAAwB,QAAV,SAAkBN,GAEjB,GAA0B,EAAtBA,EAASO,IAAIC,OAChB,OAAO,EAGR,IAAMC,EAA0BC,OAAOC,KAAKX,EAASO,IAAI,IAEzD,QAAsB,EAAlBE,EAASD,UAIO,WAAhBC,EAAS,IAIkB,OAA3BT,EAASO,IAAI,GAAGK,6BAlHrBC,EAAAA,UAASC,KAAA,CAAC,CACVC,SAAU,WACVC,SAAU,GACVC,UAAW,CACV,CACCC,QAASC,EAAAA,kBACTC,YAAa1C,EACb2C,OAAO,iDAZSC,EAAAA,6CAoBjBC,EAAAA,uBAGAA,EAAAA,WAvBF,GCAAC,EAAA,oDAKCC,EAAAA,SAAQX,KAAA,CAAC,CACTY,aAAc,CACbhD,GAEDiD,QAAS,CACRjD,SAVF","sourcesContent":["import {Component, ElementRef, OnInit, OnDestroy, Input} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\nimport * as Quill from 'quill';\n\n\n@Component({\n\tselector: 'wa-quill',\n\ttemplate: '',\n\tproviders: [\n\t\t{\n\t\t\tprovide: NG_VALUE_ACCESSOR,\n\t\t\tuseExisting: QuillComponent,\n\t\t\tmulti: true,\n\t\t},\n\t],\n})\nexport class QuillComponent implements OnInit, OnDestroy, ControlValueAccessor\n{\n\n\n\t@Input()\n\tpublic theme: string = 'snow';\n\n\t@Input()\n\tpublic options: any = null;\n\n\tprotected editor: Quill;\n\n\tprivate defaultContents: any|undefined;\n\n\n\tconstructor(\n\t\tprivate $el: ElementRef,\n\t) {}\n\n\n\tpublic ngOnInit(): void\n\t{\n\t\tconst options = this.options || {};\n\n\t\tif (typeof options.theme === 'undefined') {\n\t\t\toptions.theme = this.theme;\n\t\t}\n\n\t\tthis.editor = new Quill(this.$el.nativeElement, options);\n\n\t\tif (typeof this.defaultContents !== 'undefined') {\n\t\t\tthis.editor.setContents(this.defaultContents);\n\t\t}\n\n\t\tthis.editor.on('text-change', () => {\n\t\t\tthis.onChange(this.getValue());\n\t\t});\n\n\t\tthis.$el.nativeElement.querySelector('.ql-editor').addEventListener('blur', () => {\n\t\t\tthis.onTouched();\n\t\t});\n\t}\n\n\n\tpublic ngOnDestroy(): void\n\t{\n\t}\n\n\n\tpublic writeValue(contents: any): void\n\t{\n\t\tif (this.editor) {\n\t\t\tthis.editor.setContents(contents);\n\t\t} else {\n\t\t\tthis.defaultContents = contents;\n\t\t}\n\t}\n\n\n\tpublic registerOnChange(fn: any): void\n\t{\n\t\tthis.onChange = fn;\n\t}\n\n\n\tpublic registerOnTouched(fn: any): void\n\t{\n\t\tthis.onTouched = fn;\n\t}\n\n\n\tprotected getValue(): any|undefined\n\t{\n\t\tif (!this.editor) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst contents: any = this.editor.getContents();\n\n\t\tif (this.isEmpty(contents)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn contents;\n\t}\n\n\n\tprotected isEmpty(contents: any): boolean\n\t{\n\t\tif (contents.ops.length > 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst opsTypes: Array<string> = Object.keys(contents.ops[0]);\n\n\t\tif (opsTypes.length > 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (opsTypes[0] !== 'insert') {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (contents.ops[0].insert !== '\\n') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\n\tprotected onTouched = () => {};\n\n\n\tprivate onChange = (_: any) => {};\n\n}\n","import {NgModule} from '@angular/core';\n\nimport {QuillComponent} from './quill.component';\n\n\n@NgModule({\n\tdeclarations: [\n\t\tQuillComponent,\n\t],\n\texports: [\n\t\tQuillComponent,\n\t],\n})\nexport class QuillModule {}\n"]}